<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/front/progress/progress.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="/front/progress/progress.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
</head>
<body>
    <div class="card-group">
        <div class="leftCardBody">
            <div class="leftTopCard">
                <h5 class="cardTitle">기말고사</h5>
                <p class="dDay">d-day</p>
                <p class="cheerUpMent"><small class="text-body-secondary">${코코아버터}님 오늘도 화이팅하세요</small></p>
            </div>
            <div class="cateGory">
                <article class="cateGory1" id="homeButton">
                    <img src="/front/image/cocohome.png" class="homeIcon" alt="homeIcon">
                    홈
                </article>
                <script>function goToHome() { '홈페이지로 가는 코드' }</script>

                <article class="cateGory2" id="graphButton">
                    <img src="/front/image/cocograph.png" class="progressIcon" alt="progressIcon">
                    학습률
                </article>
                <article class="cateGory3" id="progressButton">
                    <img src="/front/image/progress.png" class="cocograph" alt="cocograph">
                    학습페이지
                </article>
                <article class="cateGory4" id="settingButton">
                    <img src="/front/image/cocosetting.png" class="cocoSettingIcon" alt="cocoSettingIcon">
                    설정
                </article>
            </div>
        </div>
        <div class="rightCardBody">
            <div>
                <article class="print" id="printButton">
                    <img src="/front/image/print.png" class="printIcon" alt="printIcon">
                    인쇄하기
                </article>
            </div>
            <div class="aaaa">
                <div class="cards">
                    <img src="/front/image/star.png" class="star" alt="star">
                    <div class="card-body">
                        <h5 class="alert alert-success" role="alert">
                            <details id="todayDetails">
                                <summary id="learning">오늘의 문제</summary>
                                <p id="quiz">오늘의 퀴즈</p>
                            </details>
                        </h5>
                        <p class="todayLearning" id="todayLearning">오늘의 문제 누르면 오늘의 문제, 오늘의 퀴즈를 누르면 오늘의 퀴즈 나올거고, 답변 입력하고
                            맞는지 확인버튼 넣을 예정
                            문제앞에 체크박스 처럼 좋아요 표시 할 수 있게 할거고, 연령이나 과목은 홈에 기본 저장되어있는대로 연동될듯. gpt는 사용자가 찾기 쉽게 앞에다 구현했으나, 여기도
                            넣을까 고민중
                        </p>
                        <p class="todayQuiz" id="todayQuiz">{{quizContent| safe}}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="print-container">
            <article class="print" id="printButton">
                <img src="/front/image/print.png" class="printIcon" alt="printIcon">
                인쇄하기
            </article>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const gptResponse = localStorage.getItem('gptResponse');
            if (gptResponse) {
                document.getElementById('todayLearning').innerText = gptResponse;
            }

            document.getElementById('printButton').addEventListener('click', async () => {
                try {
                    const response = await fetch('http://localhost:5002/print', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ gptResponse })
                    });

                    const result = await response.json();
                    if (result.error) {
                        alert('Error: ' + result.error);
                    } else {
                        alert('Success: ' + result.message);
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('An error occurred while trying to print.');
                }
            });
        });
    </script>
</body>
</html>
